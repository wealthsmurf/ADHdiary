<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADHDIARY</title>
    <style>
        :root {
            --bg-color: #F2F2F2;
            --card-bg: #FFFFFF;
            --text-main: #444444;
            --text-sub: #BBBBBB;
            --border-color: #EEEEEE;
            --adhd-blue: #4A90E2;
        }

        body.dark-mode {
            --bg-color: #121212;
            --card-bg: #1E1E1E;
            --text-main: #FFFFFF;
            --text-sub: #888888;
            --border-color: #333333;
        }

        body { 
            margin: 0; padding: 0; font-family: 'Apple SD Gothic Neo', sans-serif;
            background-color: var(--bg-color); display: flex; flex-direction: column;
            align-items: center; height: 100vh; overflow: hidden;
            color: var(--text-main); transition: background-color 0.3s, color 0.3s;
        }

        .dark-toggle {
            position: fixed; top: 20px; right: 20px; width: 45px; height: 45px;
            background: var(--card-bg); border-radius: 50%; display: flex;
            align-items: center; justify-content: center; cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1); z-index: 3000; font-size: 20px;
        }

        .logo { margin-top: 40px; font-size: 36px; font-weight: 900; letter-spacing: 5px; text-align: center; flex-shrink: 0; }
        .logo span:nth-child(1), .logo span:nth-child(2) { color: #E88385; }
        .logo span:nth-child(3), .logo span:nth-child(4) { color: #F9B252; }
        .logo span:nth-child(5), .logo span:nth-child(6) { color: #82C471; }
        .logo span:nth-child(7), .logo span:nth-child(8) { color: #5B9DED; }

        .main-card {
            background: var(--card-bg); width: 90%; max-width: 380px; margin-top: 30px;
            border-radius: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            display: flex; flex-direction: column; align-items: center; 
            flex: 1; min-height: 0; margin-bottom: 80px; transition: background 0.3s;
            padding: 0 20px; box-sizing: border-box;
        }

        .grid-container {
            display: grid; grid-template-columns: 1fr 1fr; flex-shrink: 0;
            gap: 12px; width: 100%; margin-top: 25px; position: relative; min-height: 140px;
        }

        .category-btn {
            height: 60px; border-radius: 12px; border: none;
            color: white; font-size: 16px; font-weight: bold;
            display: flex; align-items: center; justify-content: flex-start;
            padding: 0 15px; cursor: pointer; box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .category-btn .icon { font-size: 24px; margin-right: 10px; }
        .btn-book { background-color: #82C471; }
        .btn-diet { background-color: #F9B252; }
        .btn-daily { background-color: #5B9DED; }
        .btn-food { background-color: #EF6C85; }

        .adhd-mode-btn {
            flex-shrink: 0; width: 180px; height: 70px; background-color: var(--adhd-blue);
            color: white; border-radius: 35px; border: none;
            font-size: 20px; font-weight: 900; margin-top: 20px;
            box-shadow: 0 6px 0 #357ABD; cursor: pointer; z-index: 2000;
        }

        .record-section { 
            width: 100%; margin-top: 30px; text-align: left; 
            display: flex; flex-direction: column; flex: 1; min-height: 0; padding-bottom: 20px;
        }
        .record-section h3 { font-size: 12px; color: var(--text-sub); letter-spacing: 1px; margin-bottom: 10px; flex-shrink: 0; }
        
        .record-scroll-area { overflow-y: auto; flex: 1; padding-right: 5px; }
        .record-scroll-area::-webkit-scrollbar { width: 4px; }
        .record-scroll-area::-webkit-scrollbar-thumb { background: var(--border-color); border-radius: 10px; }

        /* Î™©Î°ù Ïπ¥Îìú Ïä§ÌÉÄÏùº */
        .record-card {
            background: var(--bg-color); border-radius: 18px; padding: 15px;
            margin-bottom: 12px; cursor: pointer; border: 1px solid transparent;
        }
        .record-card:active { transform: scale(0.98); background: var(--border-color); }
        .record-info b { font-size: 15px; color: var(--text-main); display: block; }
        .record-info p { font-size: 11px; color: var(--text-sub); margin: 3px 0 0 0; }

        /* --- [Í∞ïÏ°∞] Î™®Îã¨ ÌåùÏóÖ Î∞è Ïä§ÌÅ¨Î°§ ÏòÅÏó≠ ÏÑ§Ï†ï --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); display: none;
            justify-content: center; align-items: center; z-index: 5000;
            backdrop-filter: blur(8px);
        }

        .modal-content {
            background: var(--card-bg); width: 85%; max-width: 350px;
            border-radius: 30px; padding: 25px; 
            display: flex; flex-direction: column; 
            max-height: 75vh; /* ÌôîÎ©¥ ÎÜíÏù¥Ïùò 75%ÍπåÏßÄÎßå Ïª§Ïßê */
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
        }

        .modal-header { flex-shrink: 0; margin-bottom: 15px; border-bottom: 2px solid var(--border-color); padding-bottom: 15px; }
        .modal-title { font-size: 22px; font-weight: 900; color: var(--adhd-blue); }
        .modal-date { font-size: 13px; color: var(--text-sub); margin-top: 5px; }

        /* [ÌïµÏã¨] ÎÇ¥Ïö© Ïä§ÌÅ¨Î°§ ÏòÅÏó≠ */
        .modal-body { 
            font-size: 16px; line-height: 1.7; color: var(--text-main);
            flex: 1; /* ÎÇ®ÏùÄ Í≥µÍ∞Ñ Î™®Îëê Ï∞®ÏßÄ */
            overflow-y: auto; /* ÎÇ¥Ïö© Í∏∏Î©¥ Ïä§ÌÅ¨Î°§ ÏÉùÏÑ± */
            padding-right: 10px; /* Ïä§ÌÅ¨Î°§Î∞îÏôÄ ÌÖçÏä§Ìä∏ Í∞ÑÍ≤© */
            white-space: pre-wrap; word-break: break-all;
            -webkit-overflow-scrolling: touch; /* Î™®Î∞îÏùº Î∂ÄÎìúÎü¨Ïö¥ Ïä§ÌÅ¨Î°§ */
        }
        
        /* Ïä§ÌÅ¨Î°§Î∞î ÎîîÏûêÏù∏ */
        .modal-body::-webkit-scrollbar { width: 6px; }
        .modal-body::-webkit-scrollbar-track { background: transparent; }
        .modal-body::-webkit-scrollbar-thumb { background: var(--adhd-blue); border-radius: 10px; opacity: 0.5; }

        .modal-footer { flex-shrink: 0; display: flex; gap: 10px; margin-top: 20px; }
        .btn-close { flex: 1; padding: 15px; border-radius: 15px; border: none; background: var(--border-color); color: var(--text-main); font-weight: bold; cursor: pointer; }
        .btn-del { flex: 0.5; background: #ff8a80; color: white; border: none; padding: 15px; border-radius: 15px; font-weight: bold; cursor: pointer; }

        .bottom-nav {
            width: 100%; height: 65px; background: var(--card-bg);
            position: fixed; bottom: 0; display: flex;
            justify-content: space-around; align-items: center;
            border-top: 1px solid var(--border-color); font-size: 24px; color: var(--adhd-blue); z-index: 1000;
        }
        .ad-banner{
            width: 320px;
        }
    </style>
</head>
<body>

    <div class="dark-toggle" onclick="toggleDarkMode()" id="darkBtn">üåô</div>

    <div class="logo">
        <span>A</span><span>D</span><span>H</span><span>D</span><span>I</span><span>A</span><span>R</span><span>Y</span>
    </div>

    <div class="main-card">
        <div class="grid-container" id="boundary">
            <button class="category-btn btn-book" onclick="location.href='/book'">
                <span class="icon">üìñ</span> Ï±Ö Í∏∞Î°ù
            </button>
            <button class="category-btn btn-diet" onclick="location.href='/diet'">
                <span class="icon">‚öñÔ∏è</span> Îã§Ïù¥Ïñ¥Ìä∏
            </button>
            <button class="category-btn btn-daily" onclick="location.href='/daily'">
                <span class="icon">‚òï</span> ÏùºÏÉÅ
            </button>
            <button class="category-btn btn-food" onclick="location.href='/food'">
                <span class="icon">üç¥</span> ÎßõÏßë
            </button>
        </div>

        <button class="adhd-mode-btn" onclick="toggleADHD()">ADHD-MODE</button>

        <div class="record-section">
            <h3>RECENT RECORDS</h3>
            <div class="record-scroll-area">
                {% for record in records %}
                <div class="record-card" onclick="openModal('{{ record.title if record.title else record.type.upper() }}', '{{ record.date }}', '{{ record.type }}', '{{ record.id }}', `{% if record.memo %}{{ record.memo }}{% elif record.meal %}{{ record.meal }}{% elif record.emoji %}Ïò§ÎäòÏùò Í∏∞Î∂Ñ: {{ record.emoji }}{% elif record.weight %}Î™∏Î¨¥Í≤å: {{ record.weight }}kg{% else %}ÏÉÅÏÑ∏ ÎÇ¥Ïö©Ïù¥ ÏóÜÏäµÎãàÎã§.{% endif %}`)">
                    <div class="record-info">
                        <b>{{ record.title if record.title else record.type.upper() }}</b>
                        <p>{{ record.date }} | {{ record.type.upper() }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="detailModal" onclick="closeModal()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-title" id="mTitle">Ï†úÎ™©</div>
                <div class="modal-date" id="mDate">ÎÇ†Ïßú</div>
            </div>
            
            <div class="modal-body" id="mBody">ÎÇ¥Ïö©Ïù¥ Îì§Ïñ¥Í∞ëÎãàÎã§.</div>
            
            <div class="modal-footer">
                <button class="btn-close" onclick="closeModal()">Îã´Í∏∞</button>
                <form id="deleteForm" method="post" style="flex: 0.5;">
                    <button type="submit" class="btn-del" onclick="return confirm('Ï†ïÎßê ÏÇ≠Ï†úÌï†ÍπåÏöî?')">ÏÇ≠Ï†ú</button>
                </form>
            </div>
        </div>
    </div>

    <div class="bottom-nav">
        <div class = "ad-banner">
            <ins class="kakao_ad_area" style="display:none;"
data-ad-unit = "DAN-idlgMfZnErAihsHR"
data-ad-width = "320"
data-ad-height = "50"></ins>
<script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>
        </div>
    </div>

    <script>
        // Î™®Îã¨ Ïó¥Í∏∞ Î∞è ÎÇ¥Ïö© Ï±ÑÏö∞Í∏∞
        function openModal(title, date, type, id, content) {
            document.getElementById('mTitle').innerText = title;
            document.getElementById('mDate').innerText = date;
            document.getElementById('mBody').innerText = content;
            document.getElementById('mBody').scrollTop = 0; // Ïó¥ ÎïåÎßàÎã§ Ïä§ÌÅ¨Î°§ Îß® ÏúÑÎ°ú
            document.getElementById('deleteForm').action = `/delete_${type}/${id}`;
            document.getElementById('detailModal').style.display = 'flex';
            document.body.style.overflow = 'hidden'; // Îí∑Î∞∞Í≤Ω Ïä§ÌÅ¨Î°§ Î∞©ÏßÄ
        }

        function closeModal() {
            document.getElementById('detailModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Îã§ÌÅ¨Î™®Îìú
        function toggleDarkMode() {
            const body = document.body;
            body.classList.toggle('dark-mode');
            const isDark = body.classList.contains('dark-mode');
            localStorage.setItem('darkMode', isDark);
            document.getElementById('darkBtn').innerText = isDark ? '‚òÄÔ∏è' : 'üåô';
        }
        if (localStorage.getItem('darkMode') === 'true') {
            document.body.classList.add('dark-mode');
            document.getElementById('darkBtn').innerText = '‚òÄÔ∏è';
        }

        // ADHD Î™®Îìú
        let isADHD = false;
        const buttons = document.querySelectorAll('.category-btn');
        let particles = [];

        function toggleADHD() {
            isADHD = !isADHD;
            if (isADHD) {
                particles = [];
                buttons.forEach((btn) => {
                    const rect = btn.getBoundingClientRect();
                    particles.push({
                        el: btn, x: rect.left, y: rect.top, width: rect.width, height: rect.height,
                        dx: (Math.random() - 0.5) * 15, dy: (Math.random() - 0.5) * 15
                    });
                    btn.style.width = rect.width + 'px';
                    btn.style.height = rect.height + 'px';
                    btn.style.position = 'fixed'; btn.style.left = '0px'; btn.style.top = '0px'; btn.style.zIndex = '1500';
                });
                animate();
            } else { location.reload(); }
        }

        function animate() {
            if (!isADHD) return;
            particles.forEach(p => {
                p.x += p.dx; p.y += p.dy;
                if (p.x <= 0 || p.x + p.width >= window.innerWidth) p.dx *= -1;
                if (p.y <= 0 || p.y + p.height >= window.innerHeight - 65) p.dy *= -1;
                p.el.style.transform = `translate3d(${p.x}px, ${p.y}px, 0)`;
            });
            requestAnimationFrame(animate);
        }
    </script>
</body>
</html>















